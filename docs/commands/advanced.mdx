---
title: Advanced Commands
description: "Power user commands for advanced workflows"
---

# Advanced Commands

These commands provide powerful capabilities for advanced workflows.

## History Rewriting

### cherry-pick

Apply changes from specific commits to the current branch.

```bash
wit cherry-pick <commit> [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--continue` | Continue after resolving conflicts |
| `--abort` | Abort the operation |
| `--skip` | Skip current commit and continue |
| `--no-commit` | Apply changes without committing |

**Examples:**

```bash
# Apply a specific commit
wit cherry-pick abc1234

# Cherry-pick without committing
wit cherry-pick abc1234 --no-commit

# Continue after resolving conflicts
wit cherry-pick --continue

# Abort if something goes wrong
wit cherry-pick --abort
```

### rebase

Rebase the current branch onto another branch.

```bash
wit rebase <branch> [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--onto <new>` | Rebase onto a specific base |
| `--continue` | Continue after resolving conflicts |
| `--abort` | Abort the rebase |
| `--skip` | Skip current commit |

**Examples:**

```bash
# Rebase current branch onto main
wit rebase main

# Rebase onto a specific commit
wit rebase --onto new-base old-base

# Continue after conflict resolution
wit rebase --continue

# Abort the rebase
wit rebase --abort
```

### revert

Create a new commit that undoes the changes from a previous commit.

```bash
wit revert <commit> [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--no-commit`, `-n` | Revert without committing |
| `--continue` | Continue after resolving conflicts |
| `--abort` | Abort the operation |
| `-m <n>` | Specify mainline parent for merge commits |

**Examples:**

```bash
# Revert a commit
wit revert abc1234

# Revert without committing
wit revert -n abc1234

# Revert a merge commit
wit revert -m 1 abc1234
```

---

## Remote Operations

### remote

Manage remote repositories.

```bash
wit remote [command] [options]
```

**Commands:**

| Command | Description |
|---------|-------------|
| (none) | List remotes |
| `-v` | List remotes with URLs |
| `add <name> <url>` | Add a new remote |
| `remove <name>` | Remove a remote |
| `set-url <name> <url>` | Change remote URL |

**Examples:**

```bash
# List remotes
wit remote

# List with URLs
wit remote -v

# Add a remote
wit remote add origin https://github.com/user/repo.git

# Remove a remote
wit remote remove origin
```

### clone

Clone a repository.

```bash
wit clone <url> [directory] [options]
```

**Examples:**

```bash
# Clone to current directory
wit clone https://github.com/user/repo.git

# Clone to specific directory
wit clone https://github.com/user/repo.git my-project

# Clone a local repository
wit clone ./source-repo ./dest-repo
```

### fetch

Download objects and refs from a remote.

```bash
wit fetch [remote] [options]
```

**Examples:**

```bash
# Fetch from origin
wit fetch

# Fetch from specific remote
wit fetch upstream

# Fetch all remotes
wit fetch --all
```

### pull

Fetch and merge changes from a remote.

```bash
wit pull [remote] [branch] [options]
```

**Examples:**

```bash
# Pull current branch
wit pull

# Pull from specific remote
wit pull origin main
```

### push

Push commits to a remote repository.

```bash
wit push [remote] [branch] [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `-u`, `--set-upstream` | Set upstream for the branch |
| `--force`, `-f` | Force push (use with caution) |

**Examples:**

```bash
# Push current branch
wit push

# Push and set upstream
wit push -u origin main

# Push to specific remote and branch
wit push origin feature-branch
```

---

## Hooks

Customize behavior at key points in the version control workflow.

```bash
wit hooks <command> [hook-name]
```

### Commands

| Command | Description |
|---------|-------------|
| `list` | Show installed hooks |
| `install <name>` | Install a hook from template |
| `remove <name>` | Remove a hook |
| `run <name>` | Test a hook manually |

### Available Hooks

| Hook | Triggered |
|------|-----------|
| `pre-commit` | Before commit is created |
| `post-commit` | After commit is created |
| `pre-merge` | Before merge starts |
| `post-merge` | After merge completes |

### Examples

```bash
# List installed hooks
wit hooks

# Install pre-commit hook
wit hooks install pre-commit

# Test the hook
wit hooks run pre-commit

# Remove a hook
wit hooks remove pre-commit
```

### Hook Location

Hooks are stored in `.wit/hooks/`. Edit them to customize behavior:

```bash
# Example pre-commit hook
#!/bin/bash
npm run lint
npm run test
```

---

## Submodules

Manage nested repositories within your project.

```bash
wit submodule <command> [options]
```

### Commands

| Command | Description |
|---------|-------------|
| `add <url> <path>` | Add a submodule |
| `init` | Initialize submodules |
| `update` | Update submodules to recorded commits |
| `status` | Show submodule status |
| `foreach <cmd>` | Run command in each submodule |

### Examples

```bash
# Add a submodule
wit submodule add https://github.com/lib/utils.git vendor/utils

# Initialize after cloning
wit submodule init

# Update to latest recorded commits
wit submodule update

# Check status
wit submodule status

# Run a command in all submodules
wit submodule foreach "npm install"
```

---

## Worktrees

Work on multiple branches simultaneously with multiple working directories.

```bash
wit worktree <command> [options]
```

### Commands

| Command | Description |
|---------|-------------|
| `add <path> <branch>` | Create new worktree |
| `list` | List all worktrees |
| `remove <path>` | Remove a worktree |
| `prune` | Remove stale worktree entries |

### Examples

```bash
# Create worktree for feature development
wit worktree add ../feature-worktree feature-branch

# List all worktrees
wit worktree list

# Remove when done
wit worktree remove ../feature-worktree

# Clean up stale entries
wit worktree prune
```

### Use Case

```bash
# You're working on a feature but need to hotfix main
wit worktree add ../hotfix main

# Now you have two directories:
# - /project (your feature work, untouched)
# - /hotfix (clean main branch)

cd ../hotfix
# Fix the bug...
wit commit -a -m "Hotfix: critical bug"

# Go back to feature work
cd ../project
# Your feature branch is exactly as you left it!

# Clean up
wit worktree remove ../hotfix
```

---

## Reflog

View reference history for recovery.

```bash
wit reflog [ref] [options]
```

### Options

| Option | Description |
|--------|-------------|
| `expire` | Prune old reflog entries |

### Examples

```bash
# Show HEAD reflog
wit reflog

# Show reflog for specific branch
wit reflog main

# Prune old entries
wit reflog expire
```

### Example Output

```
HEAD@{0}: commit: Add authentication
HEAD@{1}: switch: moving from feature to main
HEAD@{2}: commit: Fix login bug
HEAD@{3}: merge: feature-auth
HEAD@{4}: commit: Initial setup
```

<Note>
The reflog is what powers `wit undo`. Every operation is recorded and can be reversed.
</Note>

---

## Garbage Collection

Clean up and optimize the repository.

```bash
wit gc [options]
```

### Options

| Option | Description |
|--------|-------------|
| `--aggressive` | More thorough optimization (slower) |
| `--prune=<date>` | Prune objects older than date |
| `--prune=now` | Prune all unreachable objects immediately |

### Examples

```bash
# Standard garbage collection
wit gc

# Aggressive optimization
wit gc --aggressive

# Prune immediately
wit gc --prune=now
```

### When to Run

- After deleting many branches
- After undoing many operations
- When repository feels slow
- Before backing up (reduces size)

---

## Tags

Create and manage tags.

```bash
wit tag [options] [tagname] [commit]
```

### Options

| Option | Description |
|--------|-------------|
| `-a` | Create annotated tag |
| `-m <message>` | Tag message |
| `-d <name>` | Delete a tag |
| `-l` | List tags |

### Examples

```bash
# List all tags
wit tag

# Create lightweight tag
wit tag v1.0.0

# Create annotated tag
wit tag -a v1.0.0 -m "Release version 1.0.0"

# Tag specific commit
wit tag v1.0.0 abc1234

# Delete a tag
wit tag -d v1.0.0
```

---

## Stash

Save working directory changes temporarily.

```bash
wit stash [command] [options]
```

### Commands

| Command | Description |
|---------|-------------|
| (none) or `push` | Stash current changes |
| `list` | List all stashes |
| `pop` | Apply and remove latest stash |
| `apply` | Apply latest stash without removing |
| `drop` | Remove a stash |
| `clear` | Remove all stashes |

### Examples

```bash
# Stash current changes
wit stash

# Stash with message
wit stash push -m "Work in progress on feature"

# List stashes
wit stash list

# Apply latest stash
wit stash pop

# Apply specific stash
wit stash apply stash@{1}

# Drop a stash
wit stash drop stash@{0}
```

---

## Debugging Commands

### show

Show commit details.

```bash
wit show <commit> [options]
```

**Examples:**

```bash
# Show latest commit
wit show HEAD

# Show specific commit
wit show abc1234

# Show file at specific commit
wit show abc1234:path/to/file.ts
```

### bisect

Binary search for bug introduction.

```bash
wit bisect <command> [options]
```

**Commands:**

| Command | Description |
|---------|-------------|
| `start` | Start bisect session |
| `good <commit>` | Mark commit as good |
| `bad <commit>` | Mark commit as bad |
| `reset` | End bisect session |

**Example:**

```bash
wit bisect start
wit bisect bad HEAD
wit bisect good v1.0.0
# wit will checkout commits for you to test
# After each test, run:
wit bisect good  # or wit bisect bad
# When done:
wit bisect reset
```

### clean

Remove untracked files.

```bash
wit clean [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `-n`, `--dry-run` | Preview what would be deleted |
| `-f`, `--force` | Actually delete files |

**Examples:**

```bash
# Preview untracked files
wit clean -n

# Delete untracked files
wit clean -f
```

### fsck

Verify repository integrity.

```bash
wit fsck
```

---

## Monorepo Scopes

Limit operations to specific paths in a monorepo.

```bash
wit scope <command> [path]
```

### Commands

| Command | Description |
|---------|-------------|
| `set <path>` | Set the current scope |
| `use <preset>` | Use a predefined scope |
| `clear` | Clear scope (full repository) |
| (none) | Show current scope |

### Examples

```bash
# Check current scope
wit scope

# Limit to src directory
wit scope set src/

# Use preset
wit scope use frontend

# Clear scope
wit scope clear
```

### Effect on Commands

When a scope is set:

```bash
wit scope set packages/frontend/

wit status    # Shows only frontend files
wit add .     # Stages only frontend files
wit log       # Shows commits affecting frontend
wit diff      # Shows changes in frontend only
```

---

## Plumbing Commands

Low-level commands for scripting and advanced use.

### hash-object

```bash
wit hash-object <file>
```

Calculate the hash of a file.

### cat-file

```bash
wit cat-file <hash>
```

Display contents of an object.

### ls-tree

```bash
wit ls-tree <tree-hash>
```

List contents of a tree object.

### ls-files

```bash
wit ls-files
```

List files in the index.

### rev-parse

```bash
wit rev-parse <rev>
```

Parse a revision to its hash.

### for-each-ref

```bash
wit for-each-ref
```

Iterate over references.

### update-ref

```bash
wit update-ref <ref> <hash>
```

Update a reference.

### symbolic-ref

```bash
wit symbolic-ref <name>
```

Read or set a symbolic reference.

### show-ref

```bash
wit show-ref
```

List references.
