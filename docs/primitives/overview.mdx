---
title: "Primitives Overview"
description: "Git-backed building blocks for AI agents and applications"
---

# wit Primitives

wit provides powerful primitives that leverage Git's versioning capabilities for building AI agents and applications. These primitives give you automatic versioning, branching, and rollback for free.

## What Are Primitives?

Primitives are low-level building blocks that wrap Git operations into easy-to-use interfaces:

<CardGroup cols={2}>
  <Card title="Filesystem" icon="folder" href="/primitives/filesystem">
    Git-backed file operations with automatic versioning
  </Card>
  <Card title="Knowledge" icon="brain" href="/primitives/knowledge">
    Content-addressable key-value store for agent memory
  </Card>
</CardGroup>

## Why Use Primitives?

### For AI Agents

| Capability | Benefit |
|------------|---------|
| **Automatic versioning** | Every change is tracked automatically |
| **Branching** | Explore different paths without losing work |
| **Rollback** | Undo any change, recover from mistakes |
| **Diffing** | See exactly what changed between states |
| **Persistence** | State survives restarts |

### Common Use Cases

- **Agent workspaces** - Give agents a versioned filesystem to work in
- **Long-term memory** - Store facts, preferences, and learned information
- **Experiment tracking** - Branch for different approaches, compare results
- **Audit trails** - Full history of every change
- **Checkpointing** - Save and restore agent state

## Quick Start

### Filesystem Primitive

```typescript
import { Filesystem } from 'wit/primitives';

// Create a versioned workspace
const fs = new Filesystem('./agent-workspace');

// File operations
await fs.write('src/app.ts', 'console.log("hello")');
await fs.mkdir('data');
const content = await fs.read('src/app.ts');

// Version control
await fs.commit('Initial setup');
await fs.branch('experiment');
await fs.checkout('experiment');

// See what changed
const changes = await fs.status();
const diff = await fs.diff();

// Rollback if needed
await fs.rollback();
```

### Knowledge Primitive

```typescript
import { Knowledge } from 'wit/primitives';

// Create a knowledge store
const knowledge = new Knowledge('./agent-memory');

// Store any JSON-serializable value
await knowledge.set('user-preferences', {
  language: 'typescript',
  theme: 'dark',
  notifications: true,
});

// Retrieve by key
const prefs = await knowledge.get('user-preferences');

// Atomic updates
await knowledge.update('counter', (current) => ({
  count: (current?.count || 0) + 1,
}));

// Create checkpoints
const snapshot = await knowledge.snapshot('Before experiment');

// Restore to previous state
await knowledge.restore(snapshot);

// View history
const history = await knowledge.history('user-preferences', 10);
```

## Architecture

Both primitives are backed by Git:

```
┌─────────────────────────────────────────────┐
│              Your Application                │
├─────────────────────────────────────────────┤
│  Filesystem         │    Knowledge          │
│  - read/write       │    - get/set          │
│  - commit/rollback  │    - snapshot/restore │
│  - branch/merge     │    - history          │
├─────────────────────┴───────────────────────┤
│              wit Core                        │
│  Repository │ ObjectStore │ Refs │ Index    │
├─────────────────────────────────────────────┤
│              Git Storage                     │
│  .wit/objects  │  .wit/refs  │  .wit/index  │
└─────────────────────────────────────────────┘
```

## Key Concepts

### Content-Addressable Storage

Every piece of content is stored by its hash:
- Same content = same hash = no duplication
- Integrity checking built-in
- Efficient storage and transfer

### Immutable History

Once committed, history is immutable:
- Changes create new versions, not modify old ones
- Complete audit trail
- Safe rollback to any point

### Branching Model

Create independent lines of development:
- Experiment without affecting main work
- Merge successful experiments
- Discard failed attempts

## Comparison

| Feature | Filesystem | Knowledge |
|---------|------------|-----------|
| Purpose | Versioned file operations | Key-value storage |
| Storage | Files in working directory | Git blob objects |
| Keys | File paths | Arbitrary strings |
| Values | File contents | JSON-serializable |
| Best for | Working with files | Storing structured data |

## Use with AI Agents

### LangChain / LlamaIndex

```typescript
import { Filesystem } from 'wit/primitives';

// Create workspace for agent
const workspace = new Filesystem('./agent-workspace');

// Agent can read/write files
const tool = {
  name: 'write_file',
  description: 'Write content to a file',
  execute: async ({ path, content }) => {
    await workspace.write(path, content);
    await workspace.commit(`Updated ${path}`);
    return `Wrote to ${path}`;
  },
};
```

### Memory System

```typescript
import { Knowledge } from 'wit/primitives';

// Long-term memory
const memory = new Knowledge('./agent-memory');

// Store conversation summaries
await memory.set('conversation-2024-01-15', {
  summary: 'Discussed project requirements',
  decisions: ['Use TypeScript', 'Deploy on AWS'],
  nextSteps: ['Create architecture doc'],
});

// Build context from memory
const entries = await memory.entries();
const context = Array.from(entries.values())
  .map(e => e.summary)
  .join('\n');
```

## Performance Considerations

- **Filesystem**: Files are stored directly; fast for large files
- **Knowledge**: Values are stored as blobs; efficient for structured data
- **Both**: Use Git's content-addressable storage for deduplication

## Next Steps

<CardGroup cols={2}>
  <Card title="Filesystem" icon="folder" href="/primitives/filesystem">
    Full Filesystem API reference
  </Card>
  <Card title="Knowledge" icon="brain" href="/primitives/knowledge">
    Full Knowledge API reference
  </Card>
</CardGroup>
