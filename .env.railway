# ===========================================
# WIT - RAILWAY DEPLOYMENT CONFIGURATION
# ===========================================
# Copy these variables to your Railway service's environment variables.
# Variables marked [AUTO] are automatically provided by Railway.
# Variables marked [REQUIRED] must be set manually.
# Variables marked [OPTIONAL] can be set for additional features.

# -----------------------------------------
# DATABASE & CACHE [AUTO]
# -----------------------------------------

# PostgreSQL connection (Railway provides automatically when you add PostgreSQL)
# DATABASE_URL=${{Postgres.DATABASE_URL}}

# Redis connection (Railway provides automatically when you add Redis)
# REDIS_URL=${{Redis.REDIS_URL}}

# -----------------------------------------
# REQUIRED [REQUIRED]
# -----------------------------------------

# Auth Secret - Generate a secure random string
# Run: openssl rand -base64 32
BETTER_AUTH_SECRET=CHANGE_ME_generate_with_openssl_rand_base64_32

# Public URL of your API server (update after first deploy)
BETTER_AUTH_URL=https://wit-server-production.up.railway.app

# Node environment
NODE_ENV=production

# -----------------------------------------
# SERVER [AUTO/OPTIONAL]
# -----------------------------------------

# Railway automatically sets PORT
# PORT=3000

# Server host
HOST=0.0.0.0

# Repository storage path
# If using Railway Volume, mount at this path
REPOS_DIR=/data/repos

# -----------------------------------------
# CORS & ORIGINS [REQUIRED]
# -----------------------------------------

# Update these with your actual Railway URLs after first deploy
# Comma-separated list of allowed CORS origins
CORS_ORIGINS=https://wit-web-production.up.railway.app

# Trusted origins for authentication
TRUSTED_ORIGINS=https://wit-web-production.up.railway.app

# -----------------------------------------
# AI FEATURES [OPTIONAL]
# -----------------------------------------

# OpenAI API Key for AI features
# Get from: https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-...

# Alternative: Anthropic Claude
# ANTHROPIC_API_KEY=sk-ant-...

# Enable AI-powered code review
AI_REVIEW_ENABLED=true

# -----------------------------------------
# GITHUB INTEGRATION [OPTIONAL]
# -----------------------------------------

# GitHub OAuth App for web login
# Create at: https://github.com/settings/developers
# Callback URL: {BETTER_AUTH_URL}/api/auth/callback/github
# GITHUB_CLIENT_ID=
# GITHUB_CLIENT_SECRET=

# GitHub CLI OAuth (Device Flow)
WIT_GITHUB_CLIENT_ID=Ov23liMqOvVmaVU7515C

# -----------------------------------------
# EMAIL NOTIFICATIONS [OPTIONAL]
# -----------------------------------------

# Resend API for sending emails
# Sign up at: https://resend.com
# RESEND_API_KEY=re_...

# Email sender configuration
# EMAIL_FROM_ADDRESS=noreply@yourdomain.com
# EMAIL_FROM_NAME=wit

# -----------------------------------------
# OBJECT STORAGE [OPTIONAL - for scaling]
# -----------------------------------------

# S3-compatible storage for Git objects
# Recommended: Cloudflare R2 (S3 compatible, free egress)
# S3_BUCKET=wit-objects
# S3_ENDPOINT=https://your-account.r2.cloudflarestorage.com
# AWS_ACCESS_KEY_ID=your-r2-access-key
# AWS_SECRET_ACCESS_KEY=your-r2-secret-key
# AWS_REGION=auto

# -----------------------------------------
# VECTOR SEARCH [OPTIONAL - for scaling]
# -----------------------------------------

# Qdrant Cloud for semantic code search
# Sign up at: https://cloud.qdrant.io
# QDRANT_URL=https://your-cluster.qdrant.io
# QDRANT_API_KEY=your-qdrant-api-key

# Or Pinecone
# PINECONE_API_KEY=your-pinecone-key
# PINECONE_INDEX=wit-code-embeddings

# -----------------------------------------
# PERFORMANCE TUNING
# -----------------------------------------

# Database connection pool settings
DB_POOL_MAX=20
DB_POOL_MIN=5
DB_IDLE_TIMEOUT=30000
DB_CONNECT_TIMEOUT=5000

# Node.js options (set in nixpacks.toml)
# NODE_OPTIONS=--max-old-space-size=2048
# UV_THREADPOOL_SIZE=16
