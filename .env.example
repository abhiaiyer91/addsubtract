# ===========================================
# WIT ENVIRONMENT CONFIGURATION
# ===========================================

# -----------------------------------------
# REQUIRED IN PRODUCTION
# -----------------------------------------

# Database (Railway provides this automatically)
DATABASE_URL=postgresql://wit:wit@localhost:5432/wit

# Auth Secret - REQUIRED in production
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=your-secret-key-here-change-in-production

# Node Environment
NODE_ENV=development

# -----------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------

# Server port (Railway sets PORT automatically)
PORT=3000

# Server host
HOST=0.0.0.0

# Repository Storage
# Path where git repositories are stored on disk.
# For Railway: /data/repos (persistent volume)
# For local dev: ./repos
REPOS_DIR=./repos

# -----------------------------------------
# CORS & TRUSTED ORIGINS (Production)
# -----------------------------------------

# Comma-separated list of allowed CORS origins
# Example: https://wit.example.com,https://app.wit.example.com
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# Comma-separated list of trusted origins for auth
# Usually same as CORS_ORIGINS
TRUSTED_ORIGINS=http://localhost:5173,http://localhost:3000

# Cookie domain for cross-subdomain auth (production only)
# Set to your root domain with leading dot (e.g., .wit.sh)
# Required when API and frontend are on different subdomains
# COOKIE_DOMAIN=.wit.sh

# -----------------------------------------
# AI FEATURES (Optional)
# -----------------------------------------

# OpenAI API Key for AI features (commit messages, code review, agents)
OPENAI_API_KEY=sk-...

# Or use Anthropic instead
# ANTHROPIC_API_KEY=sk-ant-...

# Enable AI-powered code review on PRs
AI_REVIEW_ENABLED=false

# -----------------------------------------
# ENCRYPTION (Optional)
# -----------------------------------------

# Encryption key for storing AI API keys per-repo
# Falls back to BETTER_AUTH_SECRET if not set
# ENCRYPTION_KEY=your-encryption-key

# -----------------------------------------
# EMAIL NOTIFICATIONS
# -----------------------------------------

# Email service provider (Resend)
# Sign up at https://resend.com and get your API key
# RESEND_API_KEY=re_...

# Email from address (must be verified in Resend)
# EMAIL_FROM_ADDRESS=noreply@wit.dev

# Email from name (displayed in email clients)
# EMAIL_FROM_NAME=wit

# App URL for email links (e.g., password reset, email verification)
# Should match your frontend URL
# APP_URL=http://localhost:5173

# -----------------------------------------
# SANDBOX PROVIDERS
# -----------------------------------------

# Sandbox provider: docker | e2b | daytona | vercel | computesdk
SANDBOX_PROVIDER=docker

# Enable audit logging for sandbox sessions
# SANDBOX_AUDIT_LOG=true

# --- Docker Provider (default, self-hosted) ---
# DOCKER_SOCKET_PATH=/var/run/docker.sock
# DOCKER_HOST=unix:///var/run/docker.sock
# SANDBOX_IMAGE=wit-sandbox:latest
# DOCKER_NETWORK=bridge

# --- E2B Provider (Firecracker microVMs) ---
# E2B_API_KEY=e2b_...
# E2B_TEMPLATE_ID=base
# E2B_TIMEOUT_MS=300000

# --- Daytona Provider (Cloud dev environments) ---
# DAYTONA_API_KEY=...
# DAYTONA_SNAPSHOT=...
# DAYTONA_LANGUAGE=typescript
# DAYTONA_AUTO_STOP_INTERVAL=15

# --- Vercel Provider (Ephemeral compute) ---
# VERCEL_TOKEN=...
# VERCEL_TEAM_ID=...
# VERCEL_PROJECT_ID=...
# VERCEL_SANDBOX_RUNTIME=node22
# VERCEL_SANDBOX_VCPUS=1
# VERCEL_SANDBOX_TIMEOUT_MS=300000

# --- ComputeSDK Provider (Multi-provider gateway) ---
# Provides access to Modal, CodeSandbox, and more via computesdk.com
# COMPUTESDK_API_KEY=...
# COMPUTESDK_PROVIDER=modal  # e2b | daytona | modal | codesandbox | blaxel
# COMPUTESDK_TIMEOUT_MS=300000
# COMPUTESDK_AUTO_DETECT=true

# Provider credentials for ComputeSDK (auto-detected):
# MODAL_TOKEN_ID=...
# MODAL_TOKEN_SECRET=...
# CODESANDBOX_TOKEN=...

# -----------------------------------------
# INTEGRATIONS (Optional)
# -----------------------------------------

# GitHub OAuth for Web App (Connect GitHub for imports)
# Create an OAuth App at https://github.com/settings/developers
# Callback URL: {YOUR_API_URL}/api/auth/callback/github
# GITHUB_CLIENT_ID=
# GITHUB_CLIENT_SECRET=

# GitHub OAuth for CLI (Device Flow)
WIT_GITHUB_CLIENT_ID=Ov23liMqOvVmaVU7515C

# CodeRabbit integration
# CODERABBIT_API_KEY=...

# -----------------------------------------
# LEGACY (Deprecated)
# -----------------------------------------

# JWT_SECRET is deprecated, use BETTER_AUTH_SECRET instead
# JWT_SECRET=
